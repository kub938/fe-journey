# 실행 컨텍스트(Execution Context (EC))

## 개념

실행 컨텍스트는 JS엔진이 코드를 실행하기 위해 필요한 모든 실행 정보(스코프, 변수, this등)를 담고 있는 실행 단위입니다.

or

실행 컨텍스트는 코드 실행 시 생성되는 환경 단위로,
변수,함수 선언을 저장하는 Lexical Environment와 this 바인딩을 관리합니다.
이를 통해 스코프 체인과 this가 어떤 값을 참조할지 결정됩니다.

## 내부 구조

Execution Context (실행 컨텍스트)  
├─ Lexical Environment (렉시컬 환경)  
ㅣ ├─ Environment Record (환경 레코드)  
ㅣ └─ Outer Environment Reference (바깥 환경 참조)  
├─ Variable Environment (var 선언 관리 레거시 영역)  
└─ This Binding (this는 scope랑 상관 없음)

### 렉시컬 환경

식별자를 찾기위한 환경

#### Environment Record(환경 레코드)

현재 스코프에 선언된 변수/함수 정보 저장

```js
let a = 1;
function foo() {}
//일때

//Environment Record
{
    a: <uninitialized>,
    foo: <function object>
}
```

#### Outer Environment Reference

이 스코프 바깥은 어디인가?

```js
function outer() {
  let x = 1;
  function inner() {
    console.log(x);
  }
}
```

이때 스코프틑 중첩된 블록 구조가 아닌 참조로 연결된 체인 구조  
상위 실행컨텍스트를 참조하는게 아닌 상위 실행 컨텍스트의 Lexical Environment를 참조함  
그 이유는 실행 컨텍스트는 실행 후 사라지지만 Lexical Environment는 참조되어 있다면 실행이 끝나도 살아있기 때문이야

구조는 아래와 같이 연결됨

```text
inner의 outer Environment Reference = outer Lexical Environment
outer의 outer Environment Reference = Global Lexical  Environment
이걸 도식화 하면 아래와 같다.

inner Lexical Environment
 └─ outer → outer Lexical Environment
             └─ outer → Global Lexical Environment
```

### Variable Environment

## 생명 주기

1. 생성 (코드가 실행되기 직전)  
   ex. JS 파일 로드 ( 전역 실행 컨텍스트 ) -> 함수 호출 (함수 실행 컨텍스트)
