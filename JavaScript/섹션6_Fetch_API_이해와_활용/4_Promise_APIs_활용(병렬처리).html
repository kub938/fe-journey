<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script>
      //순서가 보장 안되는 예시
      //   console.log("start");
      //   fetch("https://dummyjson.com/products/1")
      //     .then((res) => res.json())
      //     .then((data) => {
      //       console.log("dummyJson:", data);
      //     });
      //   fetch("https://jsonplaceholder.typicode.com/posts/1")
      //     .then((res) => res.json())
      //     .then((data) => {
      //       console.log("jsonplaceholder:", data);
      //     });

      //   console.log("end");

      //순서를 보장하진 않지만 두개 이상의  데이터를 모두 받은 뒤 작업을 처리해야할 때 Promise.all 사용

      //   Promise.all([
      //     fetch("https://dummyjson.com/products/1").then((res) => res.json()),
      //     fetch("https://jsonplaceholder.typicode.com/posts/1").then((res) =>
      //       res.json()
      //     ),
      //   ]).then(([dummyJson, jsonPlaceholder]) => {
      //     //두가지 모두 왔을 때 실행 but 각각의 도착 시간 차이가 클 경우 주의해서 사용해야한다.
      //     console.log(dummyJson);
      //     console.log(jsonPlaceholder);
      //   });

      //   console.log("end");

      //async await로 리펙토링

      async function fetchDummyAndPlaceholder() {
        const response = await Promise.all([
          fetch("https://dummyjson.com/products/1").then((res) => res.json()),
          fetch("https://jsonplaceholder.typicode.com/posts/1").then((res) =>
            res.json()
          ),
        ]);

        return response;
      }

      async function printDummyAndPlaceholder() {
        const [dummyJson, jsonPlaceholder] = await fetchDummyAndPlaceholder();
        console.log(dummyJson);
        console.log(jsonPlaceholder);
      }

      printDummyAndPlaceholder();
    </script>
  </head>
  <body>
    <p>Fetch</p>
  </body>
</html>
